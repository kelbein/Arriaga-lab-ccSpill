% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/create_ccSpill_matrix.R
\name{create_ccSpill_matrix}
\alias{create_ccSpill_matrix}
\title{Create a Spillover Matrix from Loaded Data}
\usage{
create_ccSpill_matrix(all_data)
}
\arguments{
\item{data}{A nested list of data frames, the output of
\code{load_solution_data()}.}
}
\value{
A list containing two elements:
\itemize{
\item \code{spillover_matrix}: A spillover matrix, with source channels (isotopes) as columns and measured channels as rows.
\item \code{ratios_dataframe}: The processed \code{df_ratios} data frame used to build the matrix.
}
}
\description{
This function runs the complete analysis pipeline on the nested list
returned by \code{load_solution_data()}. It combines all data, pivots
to a long format, runs linear regressions (\code{lm(MeanSignal ~ concentration)}),
calculates isotope-to-metals ratios, normalizes the ratios, and
finally produces a wide-format spillover matrix. It also produces
a tidy dataframe for examination (plotting).
}
\details{
This function requires the 'dplyr', 'tidyr', 'purrr', and 'broom' packages.
}
\examples{
\dontrun{
  # (Assumes `all_data` has been loaded using `load_solution_data()`)

  # 1. Create the outputs
  analysis_results <- create_ccSpill_matrix(all_data)

  # 2. View the results
  print(analysis_results$spillover_matrix)
  print(head(analysis_results$ratios_dataframe))
}

}
